<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title> <%- GetInfo.title %> | <%- GetInfo.slogan %> </title>
  <link rel="stylesheet" href="/styles?v=<%-v%>12" />
  <link rel="stylesheet" href="/css/style.css?v=<%-v%>12">
  <link rel="stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/css/swiper.min.css">
  <link rel="stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
  <meta name="description" content="<%- GetInfo.meta_description %>">
  <meta name="keywords" content="<%- GetInfo.meta_keyword %>">
  <meta name="author" content="<%- GetInfo.title %>">
  <meta name="robots" content="index, follow">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <meta name="theme" content="<%- GetInfo.theme %> ">
  <meta name="domain" content="<%- GetInfo.domain %> ">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3S40H8Q0BG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-3S40H8Q0BG');
  </script>


  <style>
    :root {
      --primary-color: <%- GetInfo.colors[0] %>;
      --secondary-color: <%- GetInfo.colors[1] %>;
      --accent-color: <%- GetInfo.colors[2] %>;

      --primary-chat: #f16808;
      --second-chat: #f16808;
      --accent-chat: #ffffff;
    }

    .social-links svg {
      width: 25px;
    }
    .product_detail .icon-cart-mini svg {
      fill: var(--primary-color);
    }
    .product_detail .icon-cart-mini {
      background-color: transparent;
    }

   #chatContainer img{
    width: 70px;
  height: 70px;
  object-fit: cover;
  border-radius: 10px;
  border: 3px solid #c4dae6;
   }

  </style>
</head>

<body class="<%- contentTemplate %>">

  <div class="page">

    <div class="page-wrapper">
      <div class="page-body mt-3">
        <div class="ml-3  mr-3"> <%- include('header') %></div>
        <section class="container-fluid">
          <%- include('parts/' + contentTemplate) %>
        </section>
        <%- include('footer') %>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="/dist/js/swiper.min.js"></script>
    <% if (GetInfo.type_store=="product" ) { %>
      <script type="module" src="/dist/js/functions.js?v=<%-v%>"></script>
      <% } %>
        <script>
          var menu = [];
          jQuery('.swiper-slide').each(function (index) {
            menu.push(jQuery(this).find('.slide-inner').attr("data-text"));
          });
          var interleaveOffset = 0.5;
          var swiperOptions = {
            loop: true,
            speed: 1000,
            parallax: true,
            autoplay: {
              delay: 6500,
              disableOnInteraction: false,
            },
            watchSlidesProgress: true,
            pagination: {
              el: '.swiper-pagination',
              clickable: true,
            },

            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },

            on: {
              progress: function () {
                var swiper = this;
                for (var i = 0; i < swiper.slides.length; i++) {
                  var slideProgress = swiper.slides[i].progress;
                  var innerOffset = swiper.width * interleaveOffset;
                  var innerTranslate = slideProgress * innerOffset;
                  swiper.slides[i].querySelector(".slide-inner").style.transform =
                    "translate3d(" + innerTranslate + "px, 0, 0)";
                }
              },

              touchStart: function () {
                var swiper = this;
                for (var i = 0; i < swiper.slides.length; i++) {
                  swiper.slides[i].style.transition = "";
                }
              },

              setTransition: function (speed) {
                var swiper = this;
                for (var i = 0; i < swiper.slides.length; i++) {
                  swiper.slides[i].style.transition = speed + "ms";
                  swiper.slides[i].querySelector(".slide-inner").style.transition =
                    speed + "ms";
                }
              }
            }
          };

          var swiper = new Swiper(".swiper-container", swiperOptions);

          var sliderBgSetting = $(".slide-bg-image");
          sliderBgSetting.each(function (indx) {
            if ($(this).attr("data-background")) {
              $(this).css("background-image", "url(" + $(this).data("background") + ")");
            }
          });

          const swiperMultipleSlides = document.querySelector('#swiper-multiple-slides');
          const SliderCategorias = document.querySelector('#categories-multiple-slides');

          if (swiperMultipleSlides) {
            new Swiper(swiperMultipleSlides, {
              slidesPerView: 5,
              spaceBetween: 30,
              loop: false,
              autoplay: false,
              pagination: {
                clickable: true,
                el: '.swiper-pagination-products'
              },
              breakpoints: {

                768: {
                  slidesPerView: 1,
                  stage: 2,

                }
              }
            });
          }

          if (SliderCategorias) {
            new Swiper(SliderCategorias, {
              slidesPerView: 5,
              spaceBetween: 30,
              loop: false,
              autoplay: false,
              pagination: {
                clickable: true,
                el: '.swiper-pagination-products'
              },
              breakpoints: {
                768: {
                  slidesPerView: 2,
                  stage: 2,

                }
              }
            });
          }
          /*
                document.getElementById('shareBtn').addEventListener('click', async () => {
                  try {
                    await navigator.share({
                      title: '<%- GetInfo.title %>',
                      text: '<%- GetInfo.meta_description %>',
                      url: 'URL del contenido a compartir',
                    });
                    console.log('Contenido compartido exitosamente');
                  } catch (error) {
                    console.error('Error al compartir:', error.message);
                  }
                });
          */
          const button_whatsapp = document.querySelectorAll('#btn-actions-whatsapp');

          button_whatsapp.forEach(button => {
            button.addEventListener('click', () => {
              const phone = "<%- GetInfo.catalogo.whatsapp['number'] %>";
              const title = button.getAttribute('data-title');
              const price = button.getAttribute('data-price');

              if (phone && title && price) {
                const message = `Hola, estoy interesado en *${title}*. ¿Podría proporcionar más detalles?`;
                const whatsappLink = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;

                let a = document.createElement('a');
                a.href = whatsappLink;
                a.target = '_blank';
                document.body.appendChild(a);
                a.click();

              } else {
                console.error('Required data attributes not found');
              }
            });
          });


        </script>
</body>


<div id="custom-modal" class="hidden fixed inset-0 z-[9999]" aria-labelledby="modal-title" role="dialog"
  aria-modal="true">
  <div class="fixed inset-0 bg-[#e5edef] backdrop-blur bg-opacity-85 transition-opacity"></div>
  <div class="fixed inset-0 z-10 overflow-y-auto">

    <div class="flex min-h-full justify-center p-4 text-center sm:items-center sm:p-0">

      <div class="modal-content relative transform  w-full  transition-all sm:my-8 sm:w-full sm:max-w-3xl">
        <h3 class="modal-title text-base font-semibold text-gray-900" id="modal-title"></h3>
        <div
          class="px-4 pb-4 pt-5 sm:p-6 sm:pb-4 rounded-lg bg-gradient-to-r from-orange-600 to-sky-900 text-left shadow-sm overflow-hidden mb-3">

          <div id="cart-summary" class="cart-summary text-white w-full"></div>

        </div>
        <div class="rounded-lg bg-white text-left shadow-md overflow-hidden">
          <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">

              <div
                class="icon-container mx-auto d-none hidden flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
              </div>
              <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full">

                <div class="modal-body mt-2 text-sm text-gray-500">
                  <div id="product-list" class="product-list w-full"></div>

                </div>
              </div>
            </div>
          </div>

          <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
            <button id="modal-confirm-btn" type="button"
              class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto">Confirmar
              compra</button>
            <button id="modal-cancel-btn" type="button"
              class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Seguir
              comprando</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<div id="form-shopping" class="hidden fixed inset-0 z-[9999]" aria-labelledby="modal-title" role="dialog"
  aria-modal="true">
  <div class="fixed inset-0 bg-[#e5edef] backdrop-blur bg-opacity-85 transition-opacity"></div>
  <div class="fixed inset-0 z-10 overflow-y-auto">

    <div class="flex min-h-full items-start  justify-center p-4 text-center sm:items-center sm:p-0">
      <div class="modal-content relative transform w-full  transition-all sm:my-8 sm:w-full sm:max-w-3xl">

        <div class="sm:flex sm:items-start">
          <div
            class="icon-container mx-auto d-none hidden flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full sm:mx-0 sm:h-10 sm:w-10">
          </div>
          <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full">
            <h3 class="modal-title text-xl font-semibold text-gray-900" id="modal-title"></h3>
            <div class="modal-body mt-2 text-sm ">

              <div
                class="px-4 pb-4 pt-5 sm:p-6 sm:pb-4 rounded-lg bg-gradient-to-r from-orange-600 to-sky-900 text-left shadow-sm overflow-hidden mb-3">
                <div class="summary-checkout flex text-xl justify-between">
                  <div class="subtotal text-white"></div>
                  <div class="cant-items text-white"></div>
                </div>
              </div>

              <div class="rounded-lg bg-white text-left shadow-xl px-4 pb-4  pt-5 overflow-hidden">
                <div id="orderForm" class="form">

                  <label class="block mb-3">
                    <span
                      class="after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700">
                      D.N.I
                    </span>
                    <input type="text" name="doc"
                      class="mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1"
                      placeholder="Documento DNI" />
                  </label>

                  <label class="block  mb-3">
                    <span
                      class="after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700">
                      Nombres y Apellidos
                    </span>
                    <input type="text" name="nom"
                      class="mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1"
                      placeholder="Nombres y apellidos" />
                  </label>

                  <label class="block mb-3">
                    <span
                      class="after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700">
                      Email
                    </span>
                    <input type="email" name="email"
                      class="mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1"
                      placeholder="tucorreo@gmail.com" />
                  </label>

                  <label class="block  mb-3">
                    <span
                      class="after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700">
                      Celular
                    </span>
                    <input type="text" name="celular"
                      class="mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1"
                      placeholder="999 888 777" />
                  </label>



                </div>

                <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                  <button id="send-order-end" disabled type="button"
                    class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto">
                    Enviar Pedido</button>
                </div>

              </div>

            </div>
          </div>
        </div>


      </div>
    </div>

  </div>
</div>

<div id="form-payment" class="hidden fixed inset-0 z-[9999]" aria-labelledby="modal-title" role="dialog"
  aria-modal="true">

  <div class="fixed inset-0 bg-[#e5edef] backdrop-blur bg-opacity-85  transition-opacity"></div>
  <div class="fixed inset-0 z-10 overflow-y-auto">
    <div class="flex min-h-full items-start  justify-center p-4 text-center sm:items-center sm:p-0">
      <div class="modal-content relative transform w-full transition-all sm:my-8 sm:w-full sm:max-w-3xl">

        <div class="w-full">
          <h3 class="modal-title text-base font-semibold text-gray-900" id="modal-title">Selecciona un Método de Pago
          </h3>

          <div class="modal-body mt-2 text-sm ">
            <div
              class="px-4 pb-4 pt-5 sm:p-6 sm:pb-4 rounded-lg bg-gradient-to-r from-orange-600 to-sky-900 text-left shadow-sm overflow-hidden mb-3">
              <div class="summary-checkout flex text-xl justify-between">
                <div class="subtotal text-white"></div>
                <div class="cant-items text-white"></div>
              </div>
            </div>
            <div class="w-full rounded-lg text-left bg-white shadow-xl overflow-hidden px-4 pb-4 pt-5 sm:p-6 sm:pb-4">


              <div class="space-y-4 mb-6">

                <!-- Opción de Pago con WhatsApp -->
                <label
                  class="flex items-center space-x-3 p-4 border border-gray-200 rounded-lg shadow-md cursor-pointer hover:bg-gray-50">
                  <input type="radio" name="paymentMethod" value="whatsapp"
                    class="form-radio text-green-500 focus:ring-green-400" />


                  <svg width="800px" class="w-6 h-6" height="800px" viewBox="0 0 24 24" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

                    <g id="-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g id="Brand" transform="translate(-864.000000, -48.000000)">
                        <g id="whatsapp_fill" transform="translate(864.000000, 48.000000)">
                          <path
                            d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z"
                            id="MingCute" fill-rule="nonzero">

                          </path>
                          <path
                            d="M12,2 C6.47715,2 2,6.47715 2,12 C2,13.8896 2.52505,15.6594 3.43756,17.1683 L2.54581,20.2002 C2.32023,20.9672 3.03284,21.6798 3.79975,21.4542 L6.83171,20.5624 C8.34058,21.475 10.1104,22 12,22 C17.5228,22 22,17.5228 22,12 C22,6.47715 17.5228,2 12,2 Z M9.73821,14.2627 C11.7607,16.2852 13.692,16.5518 14.3739,16.5769 C15.4111,16.6151 16.421,15.823 16.8147,14.9042 C16.9112,14.6792 16.8871,14.4085 16.7255,14.2014 C16.1782,13.5005 15.4373,12.9983 14.7134,12.4984 C14.4006,12.282 13.9705,12.349 13.7401,12.6555 L13.1394,13.5706 C13.0727,13.6721 12.9402,13.707 12.8348,13.6467 C12.4283,13.4143 11.8356,13.018 11.4092,12.5916 C10.9833,12.1657 10.6111,11.5998 10.4022,11.2195 C10.3473,11.1195 10.3777,10.996 10.4692,10.928 L11.3927,10.2422 C11.6681,10.0038 11.7165,9.59887 11.5138,9.30228 C11.065,8.64569 10.5422,7.8112 9.7855,7.25926 C9.57883,7.1085 9.3174,7.09158 9.10155,7.18408 C8.1817,7.5783 7.38574,8.58789 7.42398,9.62695 C7.44908,10.3089 7.71572,12.2402 9.73821,14.2627 Z"
                            id="形状" fill="#09244B">

                          </path>
                        </g>
                      </g>
                    </g>
                  </svg>

                  <span class="text-gray-900 font-medium">Pagar con WhatsApp</span>
                </label>

                <!-- Opción de Pago con Tarjeta de Crédito -->
                <label style="display: none !important;"
                  class="flex items-center none d-none  space-x-3 p-4 border border-gray-200 rounded-lg shadow-md cursor-pointer hover:bg-gray-50">
                  <input type="radio" name="paymentMethod" value="creditCard"
                    class="form-radio text-blue-500 focus:ring-blue-400" />
                  <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png" alt="Visa"
                    class="w-6 h-6">
                  <span class="text-gray-900 font-medium">Pagar con Tarjeta de Crédito</span>
                </label>

                <!-- Agregar más métodos de pago aquí si es necesario -->

              </div>

              <button type="button" disabled id="payment-process"
                class="w-full px-4 py-2 text-white bg-green-500 rounded-lg shadow-md hover:bg-green-600 transition duration-150 ease-in-out">
                Pagar
              </button>
            </div>

          </div>
        </div>

      </div>

    </div>

  </div>

</div>

<div id="loader" class="hidden fixed inset-0 z-[99999]" aria-labelledby="modal-title" role="dialog" aria-modal="true">
  <div class="fixed inset-0 bg-[#e5edef] backdrop-blur bg-opacity-85  transition-opacity"></div>
  <div class="fixed inset-0 z-10 overflow-y-auto">
    <div class="flex min-h-full items-start  justify-center p-4 text-center sm:items-center sm:p-0">
      <div class="modal-content relative transform w-full transition-all sm:my-8 sm:w-full sm:max-w-3xl">
        <div class="modal-body text-center text-sm flex justify-center ">
          <img src="https://media-static.creceidea.pe/images/loader-creceidea.gif" class="brightness-[1%] opacity-75"
            width="45px">
        </div>
      </div>
    </div>
  </div>
</div>

<div id="notification"
  class="fixed bottom-4 right-3 hidden p-4 z-[9999] max-w-md bg-green-600/80 backdrop-blur-sm text-white rounded-lg shadow-lg flex items-center space-x-4 transition-transform transform translate-y-20 opacity-0">
  <img id="notification-image" src="" alt="Producto" class="w-[50px] h-[50px] border-2 rounded-full object-cover">
  <div>
    <strong class="block text-md font-bold">Producto añadido</strong>
    <p id="notification-message" class="text-sm">Producto agregado al carrito.</p>
  </div>
  <button id="open-cart-btn"
    class="bg-green-800 hover:bg-green-700 text-white font-semibold py-1 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
    Ver carrito
  </button>
</div>

<div class="bubble-chat fixed bottom-10 z-[50] right-4" id="openChatIa">
  <svg fill="var(--primary-chat)" height="65px" width="65px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-7.98 -7.98 88.50 88.50" xml:space="preserve" transform="matrix(1, 0, 0, 1, 0, 0)rotate(0)" stroke="var(--primary-chat)" stroke-width="0">
    <g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(11.606559999999998,11.606559999999998), scale(0.68)">
      <rect x="-8.98" y="-7.98" width="88.50" height="88.50" rx="27.435" fill="var(--second-chat)" strokewidth="0"></rect>
    </g>
    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#e1e1e1" stroke-width="0"></g>
    <g id="SVGRepo_iconCarrier">
      <g>
        <!-- Burbuja de chat -->
        <path d="M44.487,67.087H22c-12.131,0-22-9.868-22-22V27.453c0-12.131,9.869-22,22-22h22.487c12.131,0,22,9.869,22,22v17.636 c0,3.08-0.633,6.061-1.884,8.875c0.765,2.647,2.226,5.007,4.352,7.021l3.586,3.397l-4.668,1.614 c-1.787,0.618-3.682,0.933-5.633,0.933l0,0c-2.766,0-5.646-0.619-8.582-1.843C50.795,66.4,47.653,67.087,44.487,67.087z M22,11.453 c-8.822,0-16,7.178-16,16v17.636c0,8.822,7.178,16,16,16h22.487c2.675,0,5.323-0.676,7.659-1.951l1.347-0.735l1.384,0.661 c2.196,1.048,4.309,1.659,6.295,1.822c-1.256-2.022-2.149-4.225-2.67-6.585l-0.23-1.046l0.482-0.957 c1.15-2.271,1.733-4.695,1.733-7.209V27.453c0-8.822-7.179-16-16-16H22z"></path>
        
        <!-- Círculos con animación -->
        <circle cx="16.436" cy="36.271" r="4.454" fill="var(--accent-chat)">
          <animate attributeName="opacity" values="0;1;0" dur="1.5s" repeatCount="indefinite" begin="0s" />
        </circle>
        <circle cx="32.945" cy="36.271" r="4.454" fill="var(--accent-chat)">
          <animate attributeName="opacity" values="0;1;0" dur="1.5s" repeatCount="indefinite" begin="0.5s" />
        </circle>
        <circle cx="49.455" cy="36.271" r="4.454" fill="var(--accent-chat)">
          <animate attributeName="opacity" values="0;1;0" dur="1.5s" repeatCount="indefinite" begin="1s" />
        </circle>
      </g>
    </g>
  </svg>
  </div>

	<div id="chat-content" class="w-full max-w-md bg-white rounded-xl hidden shadow-lg fixed bottom-4 right-4 z-[9999]">

    <div class="divide-y divide-white">
      <div class="flex p-5 relative">

        <!-- back -->
        <div class="cursor-pointer my-auto hidden">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75" />
          </svg>
        </div>

        <!-- avatar -->
        <div class="select-none flex-shrink-0 my-auto rounded-full">
          <img src="<%- GetInfo.logo %>"" class="w-10 object-contain rounded-full">
        </div>

        <!-- name & status -->
        <div class="flex flex-col ml-3 my-auto">
          <div class="font-medium text-md"><%- GetInfo.title %></div>
          <div class="text-green-600 text-sm"><%- GetInfo.slogan %></div>
        </div>
      </div>

      <div>
        <button id="closedChatIa" class="absolute right-2 top-2">
          <svg width="40px" height="40px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#2d6684"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M3 7C3 4.79086 4.79086 3 7 3H17C19.2091 3 21 4.79086 21 7V17C21 19.2091 19.2091 21 17 21H7C4.79086 21 3 19.2091 3 17V7Z" stroke="#2d6684" stroke-width="2"></path> <path d="M9 9L15 15M15 9L9 15" stroke="#2d6684" stroke-width="2" stroke-linecap="round"></path> </g></svg>
        </button>
      </div>

      <!-- messages -->
      <div class="bg-[#e5e7eb] p-5 space-y-3 shadow-inner h-[70vh] overflow-y-auto" id="chatContainer">
    
      </div>

      <!-- message box -->
      <div class="p-5">
        <div class="flex w-full">
          <input id="userInput" class="w-full outline-none border border-gray-200 px-3 py-1.5 rounded-l-md" placeholder="Escribir...">
          <button type="button" id="sendButton" class="bg-[#333333] px-2.5 rounded-r-md">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#FFFFFF" version="1.1" id="Layer_1" viewBox="796 707.122 200 200" enable-background="new 796 707.122 200 200" xml:space="preserve">
              <path d="M798.671,800.534c-1.559,0.651-2.6,2.148-2.667,3.837s0.849,3.264,2.351,4.039l49.397,25.494l10.707,58.754  c0.312,1.707,1.608,3.066,3.3,3.457s3.453-0.262,4.481-1.66l27.193-36.976l65.524,33.817c1.226,0.633,2.679,0.646,3.916,0.037  c1.237-0.61,2.112-1.771,2.358-3.128L996,718.017L798.671,800.534z M869.045,844.893l-21.294-10.99l112.881-81.413L869.045,844.893z  "/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
 // Selecciona el contenedor donde se insertarán los mensajes
const chatContainerGlobal = document.getElementById("chat-content");
const chatContainer = document.getElementById("chatContainer");
const openChatIa = document.getElementById("openChatIa");
const closedChatIa = document.getElementById("closedChatIa");

// Variable para rastrear si el chat ya fue abierto
let chatOpenedBefore = false;

// Función para agregar mensajes al contenedor
function addMessage(sender, message) {
  const messageDiv = document.createElement("div");

  if (sender === "client") {
    messageDiv.className = "flex justify-end";
    messageDiv.innerHTML = `
      <div class="bg-[#333333] px-3 py-2 text-white rounded-2xl rounded-br-none shadow-md">${message}</div>
    `;
  } else if (sender === "chatbot") {
    messageDiv.className = "flex justify-start";
    messageDiv.innerHTML = `
      <div class="bg-white px-3 py-2 text-gray-700 rounded-2xl rounded-bl-none shadow-md">${message}</div>
    `;
  }

  chatContainer.appendChild(messageDiv);

  // Scroll automático hacia el final
  chatContainer.scrollTop = chatContainer.scrollHeight;
}

// Función para enviar un mensaje y manejar la respuesta del chatbot
async function sendMessage(userMessage) {
  try {
    addMessage("client", userMessage);

    const response = await fetch("http://localhost:3000/chat", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        domain: "<%- GetInfo.domain %>",
        userMessage: userMessage,
      }),
    });

    const data = await response.json();
    addMessage("chatbot", data.assistantMessage);
  } catch (error) {
    console.error("Error al enviar el mensaje:", error);
  }
}

// Manejo del botón para enviar mensajes
document.getElementById("sendButton").addEventListener("click", () => {
  const userInput = document.getElementById("userInput").value;
  if (userInput.trim() !== "") {
    sendMessage(userInput);
    document.getElementById("userInput").value = "";
  }
});

// Evento para abrir el chat
openChatIa.addEventListener("click", () => {
  chatContainerGlobal.classList.remove("hidden");

  // Enviar mensaje inicial solo la primera vez
  if (!chatOpenedBefore) {
    sendMessage('Hola, tengo unas consultas.');
    chatOpenedBefore = true; // Marcar que ya se abrió el chat
  }
});

// Evento para cerrar el chat
closedChatIa.addEventListener("click", () => {
  chatContainerGlobal.classList.add("hidden");
});

// Ocultar el chat al hacer clic fuera de él
document.addEventListener("click", (event) => {
  if (
    !chatContainerGlobal.contains(event.target) &&
    !openChatIa.contains(event.target) &&
    !closedChatIa.contains(event.target)
  ) {
    chatContainerGlobal.classList.add("hidden");
  }
});

  </script>
</html>